
---

# 🧭 使用教程：数据采集与夹爪控制界面

本页面是一个基于 Flask 的 Web UI，集成了多摄像头视频流展示、夹爪串口控制、任务执行及数据采集标注功能。

## 开启方式
运行`app.py`，运行结果的最后一行会出现一个网址，打开该网址即可进入主界面。

## 🖥 页面总览

主界面包含以下几个功能模块：

1. 🤖 夹爪控制区域（串口 + 控制滑条）
2. 📷 多摄像头视频流界面
3. 📥 数据采集参数输入（index 与备注）

---

## 🤖 夹爪控制区域

### UI界面按钮/按键功能说明
#### 串口管理

* 串口选择下拉框：自动填充系统可用串口。
* `🔄 刷新串口`：重新获取串口列表。
* `🔌 打开串口`：连接指定串口设备。
* `♻️ 重连串口`：重新初始化串口通信。
* `开启线程` / `停止线程`：启动或关闭夹爪控制线程。

#### 夹爪滑动条控制

* `夹爪 1 控制` 与 `夹爪 2 控制` 对应两个不同夹爪。
* 滑动可调节开合角度（0\~100）。
* 实时通过 AJAX 控制夹爪动作。

### 夹爪控制顺序（严格按顺序执行）

1. `🔄 刷新串口`，显示**ACM**字样则表示夹爪连接成功，若显示其他则需要检查夹爪连接线路，并重新`🔄 刷新串口`
2. `🔌 打开串口`
3. `开启线程`，拖动滑动条，控制夹爪开合来放置钣金件
4. `关闭线程`，结束夹爪控制，否则在数据采集过程中会对夹爪控制产生干扰。
---

## 📷 多摄像头视频流界面

### 实时画面展示

* **Left Wrist / Top / Right Wrist**：展示三个摄像头的实时画面。
* 默认黑屏，需点击`🎥 Start Camera `按钮开启。

### 控制按钮

* `🎥 Start Camera`：启动摄像头实时流（MJPEG）。
* `🛑 Stop Camera`：关闭视频流。
* `▶️ Start Task`：开始采集任务（后台任务执行）。
* `⏹ Stop Task`：停止任务执行。

---

## 📥 数据采集输入

### 设置 index

* 输入采集序号（如：`0`、`1`、`2` 等），用于文件命名或识别。
* 点击 `Set Index` 按钮后生效（每次采集必须执行，否则序列号会混乱）。

### 添加备注

* 在“📝 添加采集数据备注”中填写描述信息，例如：

  * `特征点A-B路径`
  * `钣金边角弯曲特征`
* 点击 `提交备注`，系统将记录备注内容到文件夹名称。

---
## 执行顺序（在`关闭线程`之后）
1. 点击`🎥 Start Camera`，检查画面是否正常，若不正常则检查相机连接
2. 在`Set Index`一栏输入本次执行序列号（如：`0`、`1`、`2` 等），并点击`Set Index`
3. 点击`开始采集`
---

## 🧪 开发者建议

* 若需采集数据，请确保摄像头和夹爪串口设备已正确连接，即UI界面三个相机画面正常显示和拖动滑动条可控制夹爪开和。
* 先设置 `index` 和 `备注`，再点击 `Start Task`。
* 所有设置项最终需由后台处理并记录。

---

## 🛠 常见问题

| 问题      | 解决办法                             |
| ------- | -------------------------------- |
| 摄像头无画面  | 确认已点击 🎥 Start Camera 并检查后端摄像头是否运行正常 |
| 串口打不开   | 检查设备连接和权限，尝试重新插拔或重启设备              |
| 采集过程中断 | 运行`setpoints.py`进行复位 |
| 采集过程需手动停止 | 点击`⏹ Stop Task`并运行`setpoints.py`进行复位 |
| `app.py`运行失败 | 呼叫王凤旭 |

---

如需进一步开发和调试，可参考项目代码结构中：


